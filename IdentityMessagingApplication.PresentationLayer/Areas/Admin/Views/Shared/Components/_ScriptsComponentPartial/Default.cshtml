    <!-- REQUIRED SCRIPTS -->
<!-- jQuery -->
@* <script src="~/AdminLTE-3.1.0/plugins/jquery/jquery.min.js"></script> *@
<!-- Bootstrap -->
<script src="~/AdminLTE-3.1.0/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE -->
<script src="~/AdminLTE-3.1.0/dist/js/adminlte.js"></script>

<!-- OPTIONAL SCRIPTS -->
@* <script src="~/AdminLTE-3.1.0/plugins/chart.js/Chart.min.js"></script> *@
@* <!-- AdminLTE for demo purposes -->
<script src="~/AdminLTE-3.1.0/dist/js/demo.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="~/AdminLTE-3.1.0/dist/js/pages/dashboard3.js"></script>

<script src="~/AdminLTE-3.1.0/dist/js/adminlte.min.js"></script> *@
@* MessageListler için seçim yaptıran script *@
<script>
    $(function () {
        //Enable check and uncheck all functionality
        $('.checkbox-toggle').click(function () {
            var clicks = $(this).data('clicks')
            if (clicks) {
                //Uncheck all checkboxes
                $('.mailbox-messages input[type=\'checkbox\']').prop('checked', false)
                $('.checkbox-toggle .far.fa-check-square').removeClass('fa-check-square').addClass('fa-square')
            } else {
                //Check all checkboxes
                $('.mailbox-messages input[type=\'checkbox\']').prop('checked', true)
                $('.checkbox-toggle .far.fa-square').removeClass('fa-square').addClass('fa-check-square')
            }
            $(this).data('clicks', !clicks)
        })

        //Handle starring for font awesome
        $('.mailbox-star').click(function (e) {
            e.preventDefault()
            //detect type
            var $this = $(this).find('a > i')
            var fa = $this.hasClass('fa')

            //Switch states
            if (fa) {
                $this.toggleClass('fa-star')
                $this.toggleClass('fa-star-o')
            }
        });
    });

    function loadUserList() {
        $.ajax({
            type: "get",
            url: "/Admin/User/JSUserList",
            success: function (data) {
                // Veriyi parse edip HTML'e yerleştirin
                let users = JSON.parse(data);
                let tableBody = $("#userList tbody");
                tableBody.empty();
                let count = 0;
                users.forEach(function (item) {
                    count++;
                    let row = `<tr>
                             <td>${count}</td>
                              <input type="hidden" name="${item.Id}" id="${item.Id}" value="${item.Id}" />
                             <td><img src="${item.ImageUrl}" style="height:70px;width:60px" /></td>
                             <td>${item.Name} ${item.Surname}</td>
                             <td>${item.UserName}</td>
                             <td>${item.City}</td>
                            <td>${item.Profession}</td>
                            <td>${item.Phone}</td>
                            <td>${item.SenderMessage.length}</td>
                            <td>${item.ReceiverMessage.length}</td>
                              <td>
                             <a href="/Admin/User/ChangeIsApprovedUser/${item.Id}">
                              ${item.IsApproved ? '<i style="color:mediumseagreen;font-size:20px" class="fas fa-check-square"></i>' : '<i style="color:palevioletred;font-size:20px" class="fas fa-times-circle"></i>'}
                              </a>
                             </td>
                              <td>
                             <button class="btn btn-danger btn-delete" data-id="${item.Id}"><i class="fas fa-trash-alt"></i></button>
                              </td>
                             <td>
                                   <button class="btn btn-warning btn-update" data-id="${item.Id}" data-toggle="modal" data-target="#UpdateUser"><i class="fas fa-sync"></i></button>
                             </td>
                             </tr>`;
                    tableBody.append(row);
                });
            }
        });
    }


    $("#userList").on('click', '.btn-update', function () {
        let userId = $(this).data("id");
        console.log(userId);
        $.ajax({
            url: "/Admin/User/GetUser/" + userId,
            type: "GET",
            dataType: "json",
            success: function (funkGetUser) {
                let response = JSON.parse(funkGetUser);
                console.log(response);
                // Ürün bilgilerini popup içinde doldur
                $("#UpdateUserName").val(response.Name);
                $("#UpdateUserId").val(response.Id);
                $("#UpdateUserSurname").val(response.Surname);
                $("#UpdateUserAbout").val(response.About);
                $("#UpdateUserImage").attr("src", response.ImageUrl);
                $("#UpdateUserUsername").val(response.UserName);
                $("#UpdateUserPhone").val(response.Phone);
                $("#UpdateUserProfession").val(response.Profession);
                $("#UpdateUserCity").val(response.City);
                $("#UpdateUserEmail").val(response.Email);
                // Popup'ı göster

            },
            error: function () {
                Swal.fire({
                    title: "HATA",
                    text: "Kullanıcı bilgileri yüklenemedi.",
                    icon: "warning"
                });
            }
        });
    });

    $("#btnuserUpdate").click(function () {
        let userUpdate = {
            Name: $("#UpdateUserName").val(),
            Id: $("#UpdateUserId").val(),
            Surname: $("#UpdateUserSurname").val(),
            About: $("#UpdateUserAbout").val(),
            ImageUrl: $("#UpdateUserImage").val(),
            UserName: $("#UpdateUserUsername").val(),
            Phone: $("#UpdateUserPhone").val(),
            Profession: $("#UpdateUserProfession").val(),
            City: $("#UpdateUserCity").val(),
            Email: $("#UpdateUserEmail").val()
        };

        $.ajax({
            url: "/Admin/User/JSUpdateUser/",
            data: userUpdate,
            type: "POST",
            success: function (response) {
                if (response.success) {
                    Swal.fire({
                        title: "Güncelleme İşlemi Başarılı!",
                        text: "Kullanıcı bilgileri başarıyla güncellendi.",
                        icon: "success"
                    });
                    $("#btnUpdateClose").click();
                    loadUserList();
                } else {
                    Swal.fire({
                        title: "Hata!",
                        text: response.message,
                        icon: "error"
                    });
                }
            },
            error: function () {
                Swal.fire({
                    title: "Beklenmeyen Hata!",
                    text: "Bir hata oluştu, lütfen tekrar deneyin.",
                    icon: "error"
                });
            }
        });
    });

    $("#userList").on('click', '.btn-delete', function () {
        let userId = $(this).data('id');
        Swal.fire({
            title: "Kullanıcıyı Silmek İstediğinizden Emin Misiniz?",
            text: "Bu işlemin geri dönüşü olmayacaktır.",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Evet, sil.",
            cancelButtonText: "İptal Et."
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    type: "post",
                    url: "/Admin/User/DeleteUser/" + userId,
                    contentType: "application/json",
                    dataType: "json",
                    success: function (response) {
                        Swal.fire({
                            title: "İşlem Başarılı!",
                            text: "Seçtiğiniz kullanıcı başarılı bir şekilde silindi.",
                            icon: "success"
                        });
                        loadUserList();
                    }
                });
            }
        });
    });
</script>
